# ER図とは

データベース設計（データモデリング）で使う設計手法のこと。
ER 図を熱用してデータ構造を俯瞰的に設計できる！

主な ER 図は 2 つ

- IE 記法（鳥の足記法）
- IDEF1X 記法

## IE記法とは

リレーションが鳥の足のような形をしていることから、別名「鳥の足記法」とも呼ばれる

リレーションが直感的に理解しやすい

## IDEF1X記法とは

世界中で使われるポピュラーな ER 図記法

リレーションを「●」で表現する

IE 記法より細かい表現ができる

## ER図の基本ルール

IE記法とIDEF1X記法に共通した基本ルール（カーディナリティ以外）

### エンティティ

データのまとまりのこと。
エンティティの中に、アトリビュートという属性情報がある

e.g.

顧客 IDのなかに顧客名、電話番号がある

### アトリビュート（属性）

エンティティの中の属性情報のこと

アトリビュートの中で「主キー」や「外部キー」も表現する

主キーの項目は、エンティティ上部で資格に囲い明示する

外部キーの項目は、最初の項目名の後ろに「（FK）」と書いて明示する（それ以降の項目は、項目名のみ記述する）

### リレーション

エンティティ同士の関係を表現する線のこと。
リレーションの詳細は「カーディナリティ」という記号を使って表現する

### カーディナリティ（多重度）

1対1や1対多、多対多など、リレーションの詳細を表現する記号のこと

0以上や0または1といった表現も消える

### エンティティの依存関係、非依存関係とは

#### 依存関係

依存関係とは、必ず紐づくデータが存在しなければならない関係のこと

エンティティ間で親子関係になる

子となるエンティティの枠線を角丸で表現する

e.g. 注文テーブル（親エンティティ）と注文詳細テーブル（子エンティティ）

#### 非依存関係

エンティティ間で「親子関係がない」リレーションのこと

どちらも四角の枠線で表現する

e.g. 社員マスタと社内サークルマスタ
社員番号を元にリレーション関係が成り立っているが、紐づくデータがなくてもシステム的に成り立つ

## カーディナリティの書き方

IE記法とIDEF1X記法では、カーディナリティの書き方が異なる

### IE記法

IE記法は「○」「|」「鳥の足（３つ又の線）」という3つの記号を組み合わせて表現

| 記号 | 意味 |
| --- | --- |
| ○ | 0（ゼロ） |
| \| | 1 |
| 鳥の足 | 多 |

### IDEDF1X記法

IE記法に比べて細かい表現ができる

| 記号 | 意味 |
| --- | --- |
| なし（エンティティと直線を結ぶ） | 1 |
| ● | 0以上 |
| ●P | 1以上 |
| ●Z | 0または1 |
| ●N | 指定した数。仕様に応じてNに実数を代入(e.g. ●10) |
| ●N-M | 実数の範囲指定。仕様に応じてNとMに実数を代入(e.g. ●1-10) |
| ◇ | 0または1 ※非依存リレーションでのみ使用 |
